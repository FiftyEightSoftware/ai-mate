/* AI-Mate copper/charcoal theme */
:root{
  color-scheme: dark;
  --bg:#0b0e12;
  --surface:#14181d;
  --card:#1b2026;
  --muted:#9aa2ad;
  --text:#e8edf2;
  --brand:#c8793e;
  --accent:#d49a64;
}

html, body { height: 100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: var(--bg);
  color: var(--text);
}

.app-shell{ min-height:100%; display:flex; flex-direction:column; }
.toolbar{ position: sticky; top:0; z-index:10; background: linear-gradient(180deg, rgba(200,121,62,0.08), rgba(200,121,62,0.00)), var(--surface); border-bottom: 1px solid rgba(255,255,255,0.06); padding: calc(14px + env(safe-area-inset-top)) 16px 14px 16px; }
.toolbar h1{ margin:0; font-size: 18px; letter-spacing: .2px; }
.content{ flex:1; padding:16px; }

.bottom-nav{ position: sticky; bottom:0; z-index:10; display:flex; gap:4px; justify-content:space-between; background: linear-gradient(0deg, rgba(200,121,62,0.08), rgba(200,121,62,0.00)), var(--surface); border-top: 1px solid rgba(255,255,255,0.06); padding: 8px 8px calc(8px + env(safe-area-inset-bottom)); }
.bottom-nav .tab{ flex:1; text-align:center; text-decoration:none; color:var(--text); background: transparent; padding: 10px 6px; border-radius: 10px; font-size: 12px; display:flex; flex-direction:column; gap:4px; align-items:center; }
.bottom-nav .tab.active, .bottom-nav .tab:hover{ background: rgba(200,121,62,0.12); }

/* Cards & Lists */
.grid{ display:grid; grid-template-columns: repeat(2,1fr); gap:12px; }
.card{ display:block; text-decoration:none; color:var(--text); background:var(--card); padding:18px; border-radius:12px; text-align:center; }
.card:hover{ outline:1px solid rgba(200,121,62,0.28); filter: brightness(1.04); }
.list{ list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:8px; }
.list-item{ display:flex; align-items:center; justify-content:space-between; padding:14px; background:var(--card); border-radius:10px; }
.title{ font-weight:600; }
.subtitle{ color: var(--muted); font-size:12px; }
.btn{ background: var(--brand); color:#1b0f08; padding:8px 12px; border:none; border-radius:8px; font-weight:600; box-shadow: 0 6px 20px rgba(200,121,62,0.25); }
.empty{ color:var(--muted); text-align:center; padding:24px; }

/* Assistant */
.assistant{ display:flex; flex-direction:column; gap:16px; align-items:center; justify-content:center; min-height: 50vh; }
.mic-button{ font-size:16px; background:var(--accent); color:#1b0f08; border:none; border-radius:999px; padding:14px 18px; box-shadow: 0 6px 22px rgba(212,154,100,0.28); }

/* Transitions */
#content{ position: relative; overflow-x: hidden; }
#content > *{ will-change: transform, opacity; }
/* Slide-in animation for new page */
#content.dir-forward .page{ animation: slideInForward 320ms cubic-bezier(.22,.8,.26,1); }
#content.dir-back .page{ animation: slideInBack 320ms cubic-bezier(.22,.8,.26,1); }

@keyframes slideInForward {
  from { transform: translateX(48px); opacity: .01; }
  to   { transform: translateX(0); opacity: 1; }
}
@keyframes slideInBack {
  from { transform: translateX(-48px); opacity: .01; }
  to   { transform: translateX(0); opacity: 1; }
}

/* Validation & default Blazor bits (kept) */
.valid.modified:not([type=checkbox]) { outline: 1px solid #26b050; }
.invalid { outline: 1px solid red; }
.validation-message { color: red; }

#blazor-error-ui {
    color-scheme: light only;
    background: lightyellow;
    bottom: 0;
    box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.2);
    box-sizing: border-box;
    display: none;
    left: 0;
    padding: 0.6rem 1.25rem 0.7rem 1.25rem;
    position: fixed;
    width: 100%;
    z-index: 1000;
}

    #blazor-error-ui .dismiss {
        cursor: pointer;
        position: absolute;
        right: 0.75rem;
        top: 0.5rem;
    }

.blazor-error-boundary {
    background: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTYiIGhlaWdodD0iNDkiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIG92ZXJmbG93PSJoaWRkZW4iPjxkZWZzPjxjbGlwUGF0aCBpZD0iY2xpcDAiPjxyZWN0IHg9IjIzNSIgeT0iNTEiIHdpZHRoPSI1NiIgaGVpZ2h0PSI0OSIvPjwvY2xpcFBhdGg+PC9kZWZzPjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMCkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMzUgLTUxKSI+PHBhdGggZD0iTTI2My41MDYgNTFDMjY0LjcxNyA1MSAyNjUuODEzIDUxLjQ4MzcgMjY2LjYwNiA1Mi4yNjU4TDI2Ny4wNTIgNTIuNzk4NyAyNjcuNTM5IDUzLjYyODMgMjkwLjE4NSA5Mi4xODMxIDI5MC41NDUgOTIuNzk1IDI5MC42NTYgOTIuOTk2QzI5MC44NzcgOTMuNTEzIDI5MSA5NC4wODE1IDI5MSA5NC42NzgyIDI5MSA5Ny4wNjUxIDI4OS4wMzggOTkgMjg2LjYxNyA5OUwyNDAuMzgzIDk5QzIzNy45NjMgOTkgMjM2IDk3LjA2NTEgMjM2IDk0LjY3ODIgMjM2IDk0LjM3OTkgMjM2LjAzMSA5NC4wODg2IDIzNi4wODkgOTMuODA3MkwyMzYuMzM4IDkzLjAxNjIgMjM2Ljg1OCA5Mi4xMzE0IDI1OS40NzMgNTMuNjI5NCAyNTkuOTYxIDUyLjc5ODUgMjYwLjQwNyA1Mi4yNjU4QzI2MS4yIDUxLjQ4MzcgMjYyLjI5NiA1MSAyNjMuNTA2IDUxWk0yNjMuNTg2IDY2LjAxODNDMjYwLjczNyA2Ni4wMTgzIDI1OS4zMTMgNjcuMTI0NSAyNTkuMzEzIDY5LjMzNyAyNTkuMzEzIDY5LjYxMDIgMjU5LjMzMiA2OS44NjA4IDI1OS4zNzEgNzAuMDg4N0wyNjEuNzk1IDg0LjAxNjEgMjY1LjM4IDg0LjAxNjEgMjY3LjgyMSA2OS43NDc1QzI2Ny44NiA2OS43MzA5IDI2Ny44NzkgNjkuNTg3NyAyNjcuODc5IDY5LjMxNzkgMjY3Ljg3OSA2Ny4xMTgyIDI2Ni40NDggNjYuMDE4MyAyNjMuNTg2IDY2LjAxODNaTTI2My41NzYgODYuMDU0N0MyNjEuMDQ5IDg2LjA1NDcgMjU5Ljc4NiA4Ny4zMDA1IDI1OS43ODYgODkuNzkyMSAyNTkuNzg2IDkyLjI4MzcgMjYxLjA0OSA5My41Mjk1IDI2My41NzYgOTMuNTI5NSAyNjYuMTE2IDkzLjUyOTUgMjY3LjM4NyA5Mi4yODM3IDI2Ny4zODcgODkuNzkyMSAyNjcuMzg3IDg3LjMwMDUgMjY2LjExNiA4Ni4wNTQ3IDI2My41NzYgODYuMDU0N1oiIGZpbGw9IiNGRkU1MDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvZz48L3N2Zz4=) no-repeat 1rem/1.8rem, #b32121;
    padding: 1rem 1rem 1rem 3.7rem;
    color: white;
}

    .blazor-error-boundary::after {
        content: "An error has occurred."
    }

.loading-progress {
    position: relative;
    display: block;
    width: 8rem;
    height: 8rem;
    margin: 20vh auto 1rem auto;
}

    .loading-progress circle {
        fill: none;
        stroke: #e0e0e0;
        stroke-width: 0.6rem;
        transform-origin: 50% 50%;
        transform: rotate(-90deg);
    }

        .loading-progress circle:last-child {
            stroke: var(--brand);
            stroke-dasharray: calc(3.141 * var(--blazor-load-percentage, 0%) * 0.8), 500%;
            transition: stroke-dasharray 0.05s ease-in-out;
        }

.loading-progress-text {
    position: absolute;
    text-align: center;
    font-weight: bold;
    inset: calc(20vh + 3.25rem) 0 auto 0.2rem;
}

    .loading-progress-text:after {
        content: var(--blazor-load-percentage-text, "Loading");
    }

/* Install tip banner */
.install-banner{ position: fixed; left: 12px; right: 12px; bottom: calc(74px + env(safe-area-inset-bottom)); background: rgba(20,24,29,0.96); color: var(--text); border:1px solid rgba(200,121,62,0.25); border-radius: 12px; padding: 12px 14px; display:none; gap:10px; align-items:center; z-index: 50; box-shadow: 0 10px 26px rgba(0,0,0,0.35); }
.install-banner.show{ display:flex; animation: fadeIn 200ms ease-in-out; }
.install-banner .icon{ font-size: 18px; margin-right: 6px; }
.install-banner button{ margin-left: auto; background: transparent; border: none; color: var(--text); opacity: .8; font-size: 18px; }

code {
    color: #c02d76;
}

.form-floating > .form-control-plaintext::placeholder, .form-floating > .form-control::placeholder {
    color: var(--bs-secondary-color);
    text-align: end;
}

.form-floating > .form-control-plaintext:focus::placeholder, .form-floating > .form-control:focus::placeholder {
    text-align: start;
}

/* Floating Mic Toggle */
.floating-mic-wrap{ position: fixed; right: 16px; bottom: calc(74px + env(safe-area-inset-bottom)); z-index: 60; display:flex; gap:6px; align-items:center; }
.floating-mic{
  position: relative;
  background: var(--card);
  color: var(--text);
  border: 1px solid rgba(200,121,62,0.35);
  border-radius: 999px;
  padding: 10px 14px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.35);
}
.floating-mic-menu{
  position: relative;
  background: var(--card);
  color: var(--text);
  border: 1px solid rgba(200,121,62,0.35);
  border-radius: 10px;
  padding: 10px 10px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.35);
}
.floating-mic:hover{ filter: brightness(1.06); }
.floating-mic[aria-pressed="true"]{ outline: 2px solid rgba(0,200,40,0.65); }
.history-toggle{
  position: relative;
  background: var(--card);
  color: var(--text);
  border: 1px solid rgba(200,121,62,0.35);
  border-radius: 999px;
  padding: 10px 14px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.35);
}
.history-toggle:hover{ filter: brightness(1.06); }
.voice-history{
  position: absolute;
  right: 0;
  bottom: 56px;
  background: rgba(20,24,29,0.98);
  border: 1px solid rgba(200,121,62,0.28);
  border-radius: 12px;
  box-shadow: 0 14px 34px rgba(0,0,0,0.45);
  width: min(86vw, 360px);
  padding: 8px;
  max-height: min(50vh, 420px);
  overflow-y: auto;
}
.voice-history .head{ position: sticky; top:0; background: rgba(20,24,29,0.98); display:flex; align-items:center; justify-content:space-between; padding:4px 4px 8px 4px; border-bottom: 1px solid rgba(255,255,255,0.06); margin-bottom:8px; }
.voice-history .head .label{ font-weight:600; font-size:12px; color: var(--text); }
.voice-history .head .clear{ background: transparent; color: var(--muted); border: 1px solid rgba(255,255,255,0.12); border-radius: 8px; padding:4px 8px; font-size:12px; }
.voice-history .item{ padding:8px; border-radius: 8px; }
.voice-history .item + .item{ margin-top: 6px; border-top: 1px dashed rgba(255,255,255,0.06); padding-top: 12px; }
.voice-history .item.btn-item{ display:block; width:100%; text-align:left; background: transparent; border: none; color: var(--text); }
.voice-history .item.btn-item:hover{ background: rgba(200,121,62,0.08); }
.voice-history .item.btn-item:disabled{ opacity: .6; cursor: not-allowed; }
.voice-history .item .trans{ font-size: 12px; color: var(--text); }
.voice-history .item .act{ font-size: 12px; color: var(--muted); }
.voice-history .item .time{ font-size: 11px; color: var(--muted); opacity: .9; margin-top: 2px; }
.voice-history .item.empty{ color: var(--muted); text-align:center; }

/* Voice feedback chip */
.voice-chip{
  position: fixed;
  left: 12px;
  right: 12px;
  bottom: calc(130px + env(safe-area-inset-bottom));
  background: rgba(20,24,29,0.96);
  border: 1px solid rgba(200,121,62,0.28);
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 10px 24px rgba(0,0,0,0.35);
  z-index: 55;
  display: inline-block;
  max-width: 720px;
  margin: 0 auto;
}
.voice-chip .line{ font-size: 12px; color: var(--text); }
.voice-chip strong{ color: var(--accent); }